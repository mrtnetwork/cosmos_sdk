import 'package:blockchain_utils/blockchain_utils.dart';
import 'package:cosmos_sdk/cosmos_sdk.dart';
import 'package:test/test.dart';

void main() {
  // _queryAccountsResponse();
  _queryParamResponse();
  _metadata();
  _spendableBalanceByDenom();
  _supplyOf();
  _addressBytesToString();
  _addressStringToBytes();
  _queryAccountInfoResponse();
  _bech32PrefixResponse();
  _moudleAccounts();
  _authParamsResponse();
  _queryAccountAddressById();
  querySupply();
}

void querySupply() {
  test("description", () {
    const dataHex =
        "0a420a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f31353512063130303030300a420a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f31363512063130303030300a420a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f31373812063130303030300a410a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f313739120538323035300a440a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f313837120831303030303030300a440a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f313838120839343030303030300a440a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f313839120831363030303030300a440a38636f736d6f7376616c6f70657231307636777664656e65653872396c36776c73706863677572326c746c387a746b6672766a39612f313930120831353030303030300a3c0a37636f736d6f7376616c6f70657231336d3678357271746772347873656376753670387634347333706a753336336e3676333672392f37331201310a3e0a37636f736d6f7376616c6f70657231336d3678357271746772347873656376753670387634347333706a753336336e3676333672392f373412033234390a3d0a36636f736d6f7376616c6f7065723135747965396e6a33636a397661306a66766d35736b3664763868357a66716567673965756b632f3212033139360a3d0a36636f736d6f7376616c6f7065723135747965396e6a33636a397661306a66766d35736b3664763868357a66716567673965756b632f3312033139340a400a38636f736d6f7376616c6f70657231383361796367747374703637723673347664377473326e707032636b6b347861683772786a362f3130381204313030300a400a38636f736d6f7376616c6f70657231383361796367747374703637723673347664377473326e707032636b6b347861683772786a362f3130391204313030300a400a38636f736d6f7376616c6f706572316d6e67766b6b686d3667376e7178683468637638686a7876676178346d3878756a7a743936342f3133311204353030300a3f0a37636f736d6f7376616c6f706572316d6e67766b6b686d3667376e7178683468637638686a7876676178346d3878756a7a743936342f38331204313030300a3f0a37636f736d6f7376616c6f706572316d6e67766b6b686d3667376e7178683468637638686a7876676178346d3878756a7a743936342f38381204313030300a400a38636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a3665657465332f3136301204313430300a420a38636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a3665657465332f31383212063235303032340a3c0a37636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a3665657465332f32301201310a3e0a37636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a3665657465332f333312033239390a3f0a37636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a3665657465332f33351204323030300a410a37636f736d6f7376616c6f706572317666387479716c6e326a71713774656b756c63717770337a39657738733466787937676733612f333912063530303030300a410a37636f736d6f7376616c6f706572317666387479716c6e326a71713774656b756c63717770337a39657738733466787937676733612f343012063530303030300a410a38636f736d6f7376616c6f70657231796d7a336b6a7466397a6b666d6d3273326c7279376568307a6439657a3376633579703030662f313833120531303030300a410a38636f736d6f7376616c6f70657231796d7a336b6a7466397a6b666d6d3273326c7279376568307a6439657a3376633579703030662f313834120531303030300a0f0a07657073696c6f6e1204313030300a490a446962632f303030373235373331373434303838393443313045353136383341453846434238334143394639333131423634453739314644333045363239424334364439351201320a4d0a446962632f30303330423041413841314239303238373033423144313742393635464243424530313336353731423835343431304246454333343735423144433736354131120534333231300a500a446962632f30303932303639313533353841303032433835324132413243424544423834343644324430324535313943383135303837413031463842444234444637374241120839313730303030300a4a0a446962632f30313233383941364246384335453935394137393442453135304146314430314546433645364435413535453339323730363735423533323043424230314532120234320a4f0a446962632f303135413341304130334530413136413546364138303841363539413945343146384143374443313038363532463846383845374646324436353732434233371207313030303030300a490a446962632f303138463435434130353331424535373036384141343942324343443934313334303045374632343932373945333437373941353237373935333346413345361201310a490a446962632f303145463542433536413939413743343537383330383941333041353141443034314241444537303231334132383236413733353042444445344646344333361201320a4e0a446962632f3031464239423335463036464141444633353635393045394231413433423438453536444443343937313038423438323831363533313637383838363737323912063235303030300a4a0a446962632f30323343343442433436303633343331433743463244414530313430414238433243413730324145423045444232353843423041443343423336343443444632120231300a4f0a446962632f303237364543334131374532424144453831383231443733464532304342364437313438374631353146454533364531353939363242383732313934324639441207313030303030300a4f0a446962632f303241313132363243313333413132434233303943374435444441333642454234394141334335314345313237324135424543463846413633364439463345381207313030303030300a4d0a446962632f30333338314143313331363134373635323346393937334231314242383938463433463642363438373944374230304633304642374539334635323645323543120535303030300a5b0a446962632f303333423441383642363843414144334643413634304633354434303745334541383539353736464235313841443442303531374636363330454438424235311213313030303030303031303030303032333031300a490a446962632f303334303838333241314632323830423534393542374135303334363044334143393343333446413438454236373737353137393039433639414139344535411201320a4e0a446962632f3033393439424446454331343233434445334331434446373533434246303337464142393142424442313646374338314633443344423734414236323746303712063230303030300a500a446962632f30343531343441353841453344363342454442363845323730393131313830453532364136363245394633383233424444313442423142413337353044363444120838383839393338380a4b0a446962632f3034363233423744453834424638443442333743313638323430314341334230423544454531343838314642373136413531324343433638463045443439383912033930300a4b0a446962632f3034423435424331363446393834353137433134303342463841393244353045313946463845423735413134313146394143303234423635313336444542443412033130310a520a446962632f30344632364638394538393437354542454441373534323843443331324346324446353639413345443043393939434143314343413135314646333036393441120a353030303030303030300a490a446962632f303531463835313130423537383330343630353230313934353843444643374335443733374631323646383236334238423841413135303032464243443045461201320a490a446962632f303534353443374631443443423330343330444238333839463735433235313739424641333538313337334531323832354631463343443839413734374346311201320a4b0a446962632f3035454542433838323533313046434142454137444645424243373530464534463039364131353146393641443741423439343836313144304132414242444612033131310a4b0a446962632f3036303230303945323943414443384334463445464130443237344244413039344145303946433745304231344645434131434636333146393345353439323612033130300a4a0a446962632f30373034354535424341344346384436323943443837443546453438303934324137383045313746374141413841314532323238413839394141313737314531120233390a4b0a446962632f3037363639343941464235323032423238354231354335363543463131454634423435393239343044313737344637433343334341303538443530303933453912033230300a4c0a446962632f303737414543433739313536303431434135323236374443424133414432453236443743433344303835353339304142393532363536453131433733424232421204363636360a4c0a446962632f303739313243323430303439333243443536314231373531353632423232454137383746333146393832313536384238384635354138463531443332363732321204353030300a520a446962632f30383044373630344439433139363041333536324531414534453845413846333042373831333831304145333036363044343144443637373042314335393239120a323030303030303030300a4c0a446962632f303836453837343838393037383944434333413333313332343539343545394132313334353435394434303041444646303839353638383731314535384437341204313030300a4e0a446962632f3038383232463635443043453346443237423335423945393930343643424142373244373331433739393142424338353836453839313646373837323146454612063130303030300a490a446962632f303838333441373646344535414544303836393039313646363145413132414137314346443633364242413332383036323032374446394641363230423745331201310a4c0a446962632f303839353631433934424145364232443144463439433439373641373439414236394342393534313244413835393739344233424338443138423534304642421204313030300a500a446962632f30384134303430353435424246423538414244393532414432444538433236433938413342384136464638343830363645423437334544373137353537384630120838373939393439380a490a446962632f303844323041354243443341353533364435343931424534393030324443373031374442384335413433373536384632334633444131313734463543423532451201310a520a446962632f30384634304336373146393643363144394231374138353546323439433237344236364131324236343233353446313641383533324434303745343534444546120a323730303030303030300a530a446962632f30393336374536333936374241423137433037433644433142453246324442334336444538314333363139304133443945314142453145364130303444373931120b31303030303030303030300a4c0a446962632f303936443031374538334436454145463842434444303533424330304342333836334545394143444133463241443731464139414637323732414443384546331204363636360a4a0a446962632f30413343314136333944433934304546394236304235323932454241313732324643393235304235344145394141413838433234423838364246393033303945120239390a4a0a446962632f30413738313330424137334544464445373143463437464645414443453941423930313939333943393436393532324130334534433843364231313237453442120231300a5b0a446962632f304231463541444635343745463642353530334637373839414134463537464338304631324342434632453439454337374637374333433335363031423631391213313030303030303030303030303030303030300a4b0a446962632f3042323031414635394633424533304432464646353541354239424331443544313643454634324139463639343545383843463034303733463845344341464212033230300a4b0a446962632f3042383544433739423832423034424444374137383239384338333031354130384642444543424338414545313639313144313934393236364232373836393712033530300a490a446962632f304243354646413633394638453731373542333731354538394435303238413834363245373836423734324537374235433630313638393945393545444634391201320a490a446962632f304246434344334232363537354241393937363841453939453037413142434244304534353334414232343438343230353535324139314330303245324641311201310a4e0a446962632f3043324131433641334539333934394536453534443143414136443344413437433846423746393442383031303331344531323330344536373541423730443312063230303030300a4e0a446962632f3043373534423432334633323542334338444542443833374345374334434630443442304536304245423731304538433843324532333137363944433335374312063130333030300a4f0a446962632f304343413545423135424332464534373445373144424339363938333032434445323630423646363534384639314333303030324637434246323238313937421207363030303030300a490a446962632f304534304143413137393137343137373235464230363441383145393836353839453242313938413730393344384346333530353944433137354645434634451201310a4b0a446962632f3045444234433245384535393641353246453746443044303733373037463836454541343533433132354432383632384441343843393339363546453033443712033130300a490a446962632f304546433943453531374435433836384332334642393146333142323241413146413442363342443743433538334244353835354634354635444246393942421201310a4f0a446962632f304631323344304346313631344438433630323145393334324646334338344435354236424333303642324546303543413037443839463630303542443642321207313030323030300a4f0a446962632f304634344539363939363238333645434437463234324134333346363146314533453235443237413438374646413142324143324132343241363341344532351207323030303030300a4e0a446962632f3046354239343631343442333339453232333139453739384330463230394243363846463445313330313641384432384145414541323730394231463735343812063332303030300a580a446962632f304636374339464243433732314632423145393543413641434538433843443039314231344138304134433545394546313836314445364638373635334346361210313030303030303030303030303030300a4e0a446962632f3130363344343242313836463433303546314139463635443243394338313744353533353744354235313032453137374536413430344145344343364435363112063130303030300a4b0a446962632f3130413143343845453831393532384432313644463230443431414444454339433632464546424637363143384333433332413745303036343543423043454312033230300a4b0a446962632f3131383444453733394541463441453433453342363034464639413146454236463535353432374542383039443233303432374642453543373534373843453712033234380a4b0a446962632f3131434244433834423041433041424144443938314333303342463142343336344138373636344445393442374331434344454342303135303741434342353312033130300a4b0a446962632f3131444135394644423841353935324538373633323443433542444535303144343035434230313034463645374439413845343446453941393242443737323812033432330a4a0a446962632f31323330393230303931433838343245424239393543434137303041443834393242323143323432314137444437423833363044323745414433343530364138120231300a500a446962632f31323945433642384134314245303746393444443236374635353246344145314435454145424235313633344131343638353536414630364331304332363932120832303030303030300a520a446962632f31324434363435344243433032303038313346323536313436464636383230384544343843393135334444363139323732333439384136383739424632303033120a313132303134393536350a560a446962632f31324441343233303445453143453936303731463731324141344435383138364144313143333136354330444344413731453031374135344633393335453636120e32343139323438353831363931380a4c0a446962632f313245383732333736433530373346353330333735464441324541414539353942354542454131383544333138333631453530463137453838314445434237431204323637340a4b0a446962632f3133363443373745314643394341373044393335324633333246383533383134333835333834413538453345384638304543423638363841374230394634444112033130300a4a0a446962632f31333836314245444635453037364443304543423837454244303839453436354330444439323246443437423139434341463045443544333937384435384333120232300a4f0a446962632f313342373730463341413632374343443939443332373544454630314437343139393437324244434145453031453443323634363035393134334234373330391207353230303030300a4c0a446962632f313345423130464145344534453330363538383735423137453133333839323444334544454238353637303131433346363133323745364643424233454141361204393030300a4b0a446962632f3134424345414646353434423535344445393439383444353433363036463642423445354132423830334138374143464233433735363036353242353532373212033130300a540a446962632f31344639424333453434423841394331424531464230383938304641423837303334433939303545463137434632463530303846433038353231383831314343120c3138303633303530393235310a4c0a446962632f313531344139373245314644413733313142304246433937353642384436334145303934353237393030354438444343353735314533343736414142423846361204393530300a490a446962632f313532394238434632343333413141424337463039343638424530334432413745413443454646444133343534413145463931453245423930444341433744361201320a4f0a446962632f3135343246384443373045373939393639314539393145314544454231423437453635453341323137423136343944333437303938454534384143423538304612073535303230303012490a446962632f3135453333463233344533423830344643463237393741313037423434303642333943424446313331364338464638344635394133324442414338374445344110b006";
    final supply =
        QueryTotalSupplyResponse.deserialize(BytesUtils.fromHexString(dataHex));
    expect(supply.toHex, dataHex);
  });
}

void _spendableBalanceByDenom() {
  test("spendableBalanceByDenom", () {
    final request = QuerySpendableBalanceByDenomRequest.deserialize(
        BytesUtils.fromHexString(
            "0a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a12057561746f6d"));
    expect(request.address.address,
        "cosmos1htg7dmhelazdsmuwm9ngtg0tpe82006uqdw9nj");
    expect(request.toHex,
        "0a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a12057561746f6d");
    final respone = QuerySpendableBalancesResponse.deserialize(
        BytesUtils.fromHexString("0a100a057561746f6d120733303030303030"));
    expect(respone.toHex, "0a100a057561746f6d120733303030303030");
  });
}

void _supplyOf() {
  test("SupplyOf", () {
    final request = QuerySupplyOfRequest.deserialize(
        BytesUtils.fromHexString("0a057561746f6d"));
    expect(request.denom, "uatom");
    final response = QuerySupplyOfResponse.deserialize(BytesUtils.fromHexString(
        "0a190a057561746f6d121031363734333931393135393538363538"));
    expect(response.amount.amount, BigInt.parse("1674391915958658"));
  });
}

void _queryParamResponse() {
  test("query params response", () {
    final response =
        QueryParamsResponse.deserialize(BytesUtils.fromHexString("0a021001"));
    expect(response.toHex, "0a021001");
  });
}

void _metadata() {
  test("metadataResponse", () {
    const String metadataHex =
        "0a85010a2b546865206e6174697665207374616b696e6720746f6b656e206f662074686520436f736d6f73204875622e12120a057561746f6d1a096d6963726f61746f6d12140a056d61746f6d10031a096d696c6c6961746f6d12080a0461746f6d10061a057561746f6d220461746f6d2a0f436f736d6f73204875622041746f6d320441544f4d";
    final respone = QueryDenomMetadataResponse.deserialize(
        BytesUtils.fromHexString(metadataHex));
    expect(respone.metadata.base, "uatom");
    expect(respone.metadata.name, "Cosmos Hub Atom");
    expect(respone.metadata.description,
        "The native staking token of the Cosmos Hub.");
    expect(respone.toHex, metadataHex);
  });
}

void _addressBytesToString() {
  test("addresBytesToString", () {
    final request = AddressBytesToStringResponse.deserialize(
        BytesUtils.fromHexString(
            "0a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a"));
    expect(
        request.addressString, "cosmos1htg7dmhelazdsmuwm9ngtg0tpe82006uqdw9nj");
    expect(request.toHex,
        "0a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a");
  });
}

void _addressStringToBytes() {
  test("addresBytesToString", () {
    final response = AddressStringToBytesResponse.deserialize(
        BytesUtils.fromHexString(
            "0a14bad1e6eef9ff44d86f8ed96685a1eb0e4ea7bf5c"));
    expect(CosmosBaseAddress.fromBytes(response.addressBytes).address,
        "cosmos1htg7dmhelazdsmuwm9ngtg0tpe82006uqdw9nj");
    expect(response.toHex, "0a14bad1e6eef9ff44d86f8ed96685a1eb0e4ea7bf5c");
  });
}

void _queryAccountInfoResponse() {
  test("Query account info response", () {
    final respone = QueryAccountInfoResponse.deserialize(BytesUtils.fromHexString(
        "0a330a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a18e3ce2d"));
    expect(respone.toHex,
        "0a330a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a18e3ce2d");
    expect(respone.info.address.address,
        "cosmos1htg7dmhelazdsmuwm9ngtg0tpe82006uqdw9nj");
  });
}

void _bech32PrefixResponse() {
  test("bech32PrefixResponse", () {
    final re = Bech32PrefixResponse.deserialize(
        BytesUtils.fromHexString("0a06636f736d6f73"));
    expect(re.toHex, "0a06636f736d6f73");
    expect(re.bech32Prefix, "cosmos");
  });
}

void _moudleAccounts() {
  test("moudle Accounts", () {
    const responseHex =
        "0a80010a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e74125a0a330a2d636f736d6f7331666c343876736e6d73647a637638357135643271347a35616a64686138797533346d6630656818e0c4011212626f6e6465645f746f6b656e735f706f6f6c1a066275726e65721a077374616b696e670a720a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e74124c0a330a2d636f736d6f73316170306d6836787a666e38393433757272383471366165377a666e61723438616d3265726864188fd82d1215636f6e73756d65725f726577617264735f706f6f6c0a700a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e74124a0a330a2d636f736d6f73316a7636357333677271663676366a6c33647034743663397439726b3939636438386c7975666c18dfc401120c646973747269627574696f6e1a0562617369630a710a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e74124b0a330a2d636f736d6f73313778706676616b6d32616d67393632796c73366638347a336b656c6c3863356c73657271746118ddc401120d6665655f636f6c6c6563746f721a0562617369630a680a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e7412420a330a2d636f736d6f73313064303779323635676d6d757674347a30773961773838306a6e73723730306a367a6e396b6e18dec4011203676f761a066275726e65720a6f0a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e7412490a330a2d636f736d6f7331766c7468676178323363613973796b377867617a333437786d66346e756e656638676b6876731890d82d1212696e746572636861696e6163636f756e74730a690a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e7412430a330a2d636f736d6f73316d33683330776c767366386c6c7275787470756b64767379306b6d326b756d3867333863387118e2c40112046d696e741a066d696e7465720a84010a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e74125e0a330a2d636f736d6f73317479676d733378686873337976343837706878336477346139356a6e3774376c706d3437307218e1c40112166e6f745f626f6e6465645f746f6b656e735f706f6f6c1a066275726e65721a077374616b696e670a750a222f636f736d6f732e617574682e763162657461312e4d6f64756c654163636f756e74124f0a330a2d636f736d6f7331796c3668646a686d6b663337363339373330676666616e707a6e647a64706d68776c6b66687218a19d0b12087472616e736665721a066d696e7465721a066275726e6572";
    final resp = QueryModuleAccountsResponse.deserialize(
        BytesUtils.fromHexString(responseHex));
    for (final i in resp.accounts) {
      expect(i.typeUrl, "/cosmos.auth.v1beta1.ModuleAccount");
    }
    expect(resp.toHex, responseHex);
  });
}

void _authParamsResponse() {
  test("Auth params response", () {
    final resp = AuthQueryParamsResponse.deserialize(
        BytesUtils.fromHexString("0a0d0880041007180a20ce0428e807"));
    expect(resp.toHex, "0a0d0880041007180a20ce0428e807");
  });
}

void _queryAccountAddressById() {
  test("Query account address by id", () {
    final resp = QueryAccountAddressByIDResponse.deserialize(
        BytesUtils.fromHexString(
            "0a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a"));
    expect(resp.accountAddress.address,
        "cosmos1htg7dmhelazdsmuwm9ngtg0tpe82006uqdw9nj");
    expect(resp.toHex,
        "0a2d636f736d6f733168746737646d68656c617a64736d75776d396e67746730747065383230303675716477396e6a");
  });
}
